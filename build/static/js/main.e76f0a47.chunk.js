(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,n,t){e.exports=t(26)},24:function(e,n,t){},26:function(e,n,t){"use strict";t.r(n);var a=t(2),o=t.n(a),r=t(8),c=t.n(r),i=t(3),u=t(28),l="/api/persons",m=function(){return u.a.get(l)},s=function(e){return u.a.post(l,e)},f=function(e,n){return u.a.put("".concat(l,"/").concat(e),n)},d=function(e){return u.a.delete("".concat(l,"/").concat(e))},b=(t(24),function(e){return o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{value:e.filter,onChange:e.filterChanged}))}),g=function(e){return o.a.createElement("form",{onSubmit:e.addPerson},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:e.NewName,onChange:e.handleNameChange}),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:e.number,onChange:e.handleNumberChange}))),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},h=function(e){return""===e.message?null:o.a.createElement("div",{className:"inform"===e.type?"inform":"error"},e.message)},p=function(e){var n=e.persons,t=e.filter;console.log("----------------"),console.log("persons",n);return o.a.createElement("ul",null,n.map(function(a){if(a.name.toLowerCase().includes(t))return o.a.createElement("li",{key:a.id},a.name," ",a.number," ",o.a.createElement("button",{onClick:function(){return function(t){var a=Array.from(n);console.log(t),console.log(a);var o=a.findIndex(function(e){return e.id==t}),r=a.splice(o,1);console.log(r),console.log(a),e.setPersons(a),d(t).then(function(n){e.setNotification("deleted ".concat(r[0].name)),e.setNotificationType("inform"),setTimeout(function(){return e.setNotification("")},5e3)}).catch(function(n){e.setNotification("already deleted ".concat(r[0].name)),e.setNotificationType("error"),setTimeout(function(){return e.setNotification("")},5e3)})}(a.id)}},"Delete"))}))},E=function(e){var n=Object(a.useState)(""),t=Object(i.a)(n,2),r=t[0],c=t[1],u=Object(a.useState)([]),l=Object(i.a)(u,2),d=l[0],E=l[1],v=Object(a.useState)(""),N=Object(i.a)(v,2),w=N[0],j=N[1],C=Object(a.useState)(""),O=Object(i.a)(C,2),y=O[0],T=O[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),P=k[0],A=k[1],x=Object(a.useState)("error"),D=Object(i.a)(x,2),I=D[0],J=D[1];Object(a.useEffect)(function(){m().then(function(e){E(e.data)})},[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(b,{filter:r,filterChanged:function(e){c(e.target.value.toLowerCase())}}),o.a.createElement("h2",null,"Add a new"),o.a.createElement(g,{addPerson:function(e){e.preventDefault();var n={name:w,number:y};d.find(function(e){return e.name===w})?!0===window.confirm("".concat(w," already exists. Do you want to change number?"))&&(f(d.find(function(e){return e.name===w}).id,n),A("Changed ".concat(n.name)),J("inform"),setTimeout(function(){return A("")},5e3)):s(n).then(function(e){console.log(e),A("Added ".concat(n.name)),J("inform"),setTimeout(function(){return A("")},5e3),E(d.concat(e.data))}).catch(function(e){A("Adding failed ".concat(n.name)),J("error"),setTimeout(function(){return A("")},5e3),console.log(e)}),console.log(d),T(""),j("")},number:y,NewName:w,handleNumberChange:function(e){T(e.target.value)},handleNameChange:function(e){j(e.target.value)}}),o.a.createElement(h,{type:I,message:P}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(p,{setNotificationType:J,setNotification:A,persons:d,filter:r,setPersons:E}),o.a.createElement("div",null,"debug: ",w))};c.a.createRoot(document.getElementById("root")).render(o.a.createElement(E,null))}},[[11,2,1]]]);
//# sourceMappingURL=main.e76f0a47.chunk.js.map