(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,n,t){e.exports=t(27)},25:function(e,n,t){},27:function(e,n,t){"use strict";t.r(n);var a=t(2),o=t.n(a),r=t(8),c=t.n(r),i=t(11),u=t(3),l=t(29),m="/api/persons",s=function(){return l.a.get(m)},f=function(e){return l.a.post(m,e)},d=function(e,n){return l.a.put("".concat(m,"/").concat(e),n)},b=function(e){return l.a.delete("".concat(m,"/").concat(e))},g=(t(25),function(e){return o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{value:e.filter,onChange:e.filterChanged}))}),h=function(e){return o.a.createElement("form",{onSubmit:e.addPerson},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:e.NewName,onChange:e.handleNameChange}),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:e.number,onChange:e.handleNumberChange}))),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},p=function(e){return""===e.message?null:o.a.createElement("div",{className:"inform"===e.type?"inform":"error"},e.message)},E=function(e){var n=e.persons,t=e.filter;console.log("----------------"),console.log("persons",n);return o.a.createElement("ul",null,n.map(function(a){if(a.name.toLowerCase().includes(t))return o.a.createElement("li",{key:a.id},a.name," ",a.number," ",o.a.createElement("button",{onClick:function(){return function(t){var a=Array.from(n);console.log(t),console.log(a);var o=a.findIndex(function(e){return e.id==t}),r=a.splice(o,1);console.log(r),console.log(a),e.setPersons(a),b(t).then(function(n){e.setNotification("deleted ".concat(r[0].name)),e.setNotificationType("inform"),setTimeout(function(){return e.setNotification("")},5e3)}).catch(function(n){e.setNotification("already deleted ".concat(r[0].name)),e.setNotificationType("error"),setTimeout(function(){return e.setNotification("")},5e3)})}(a.id)}},"Delete"))}))},v=function(e){var n=Object(a.useState)(""),t=Object(u.a)(n,2),r=t[0],c=t[1],l=Object(a.useState)([]),m=Object(u.a)(l,2),b=m[0],v=m[1],N=Object(a.useState)(""),w=Object(u.a)(N,2),j=w[0],O=w[1],C=Object(a.useState)(""),y=Object(u.a)(C,2),T=y[0],S=y[1],k=Object(a.useState)(""),P=Object(u.a)(k,2),A=P[0],x=P[1],D=Object(a.useState)("error"),I=Object(u.a)(D,2),J=I[0],L=I[1];Object(a.useEffect)(function(){s().then(function(e){v(e.data)})},[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(g,{filter:r,filterChanged:function(e){c(e.target.value.toLowerCase())}}),o.a.createElement("h2",null,"Add a new"),o.a.createElement(h,{addPerson:function(e){e.preventDefault();var n={name:j,number:T};b.find(function(e){return e.name===j})?!0===window.confirm("".concat(j," already exists. Do you want to change number?"))&&(d(b.find(function(e){return e.name===j}).id,n).then(function(e){console.log(e);var n=Object(i.a)({},b.find(function(e){return e.name===j}),{number:T});console.log("modified:",n),v(b.map(function(e){return e.name===j?n:e}))}),x("Changed ".concat(n.name)),L("inform"),setTimeout(function(){return x("")},5e3)):f(n).then(function(e){console.log(e),x("Added ".concat(n.name)),L("inform"),setTimeout(function(){return x("")},5e3),v(b.concat(e.data))}).catch(function(e){x("Adding failed ".concat(n.name)),L("error"),setTimeout(function(){return x("")},5e3),console.log(e)}),console.log(b),S(""),O("")},number:T,NewName:j,handleNumberChange:function(e){S(e.target.value)},handleNameChange:function(e){O(e.target.value)}}),o.a.createElement(p,{type:J,message:A}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(E,{setNotificationType:L,setNotification:x,persons:b,filter:r,setPersons:v}),o.a.createElement("div",null,"debug: ",j))};c.a.createRoot(document.getElementById("root")).render(o.a.createElement(v,null))}},[[12,2,1]]]);
//# sourceMappingURL=main.c22658d6.chunk.js.map