(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,n,t){e.exports=t(26)},25:function(e,n,t){},26:function(e,n,t){"use strict";t.r(n);var a=t(2),o=t.n(a),r=t(8),c=t.n(r),u=t(11),i=t(3),l=t(28),m="/api/persons",s=function(){return l.a.get(m)},f=function(e){return l.a.post(m,e)},d=function(e,n){return l.a.put("".concat(m,"/").concat(e),n)},b=function(e){return l.a.delete("".concat(m,"/").concat(e))},g=(t(25),function(e){return o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{value:e.filter,onChange:e.filterChanged}))}),h=function(e){return o.a.createElement("form",{onSubmit:e.addPerson},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:e.NewName,onChange:e.handleNameChange}),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:e.number,onChange:e.handleNumberChange}))),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},p=function(e){return""===e.message?null:o.a.createElement("div",{className:"inform"===e.type?"inform":"error"},e.message)},E=function(e){var n=e.persons,t=e.filter;console.log("----------------"),console.log("persons",n);return o.a.createElement("ul",null,n.map(function(a){if(a.name.toLowerCase().includes(t))return o.a.createElement("li",{key:a.id},a.name," ",a.number," ",o.a.createElement("button",{onClick:function(){return function(t){var a=Array.from(n);console.log(t),console.log(a);var o=a.findIndex(function(e){return e.id==t}),r=a.splice(o,1);console.log(r),console.log(a),e.setPersons(a),b(t).then(function(n){e.setNotification("deleted ".concat(r[0].name)),e.setNotificationType("inform"),setTimeout(function(){return e.setNotification("")},5e3)}).catch(function(n){return v(n,e.setNotification,e.setNotificationType)})}(a.id)}},"Delete"))}))},v=function(e,n,t){n(e.response.data.error),t("error"),setTimeout(function(){return n("")},5e3),console.log(e)},N=function(e){var n=Object(a.useState)(""),t=Object(i.a)(n,2),r=t[0],c=t[1],l=Object(a.useState)([]),m=Object(i.a)(l,2),b=m[0],N=m[1],w=Object(a.useState)(""),j=Object(i.a)(w,2),O=j[0],C=j[1],y=Object(a.useState)(""),S=Object(i.a)(y,2),T=S[0],k=S[1],P=Object(a.useState)(""),x=Object(i.a)(P,2),A=x[0],D=x[1],I=Object(a.useState)("error"),J=Object(i.a)(I,2),L=J[0],B=J[1];Object(a.useEffect)(function(){s().then(function(e){N(e.data)})},[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(g,{filter:r,filterChanged:function(e){c(e.target.value.toLowerCase())}}),o.a.createElement("h2",null,"Add a new"),o.a.createElement(h,{addPerson:function(e){e.preventDefault();var n={name:O,number:T};b.find(function(e){return e.name===O})?!0===window.confirm("".concat(O," already exists. Do you want to change number?"))&&d(b.find(function(e){return e.name===O}).id,n).then(function(e){console.log(e);var t=Object(u.a)({},b.find(function(e){return e.name===O}),{number:T});console.log("modified:",t),N(b.map(function(e){return e.name===O?t:e})),D("Changed ".concat(n.name)),B("inform"),setTimeout(function(){return D("")},5e3)}).catch(function(e){return v(e,D,B)}):f(n).then(function(e){console.log(e),D("Added ".concat(n.name)),B("inform"),setTimeout(function(){return D("")},5e3),N(b.concat(e.data))}).catch(function(e){return v(e,D,B)}),console.log(b),k(""),C("")},number:T,NewName:O,handleNumberChange:function(e){k(e.target.value)},handleNameChange:function(e){C(e.target.value)}}),o.a.createElement(p,{type:L,message:A}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(E,{setNotificationType:B,setNotification:D,persons:b,filter:r,setPersons:N}),o.a.createElement("div",null,"debug: ",O))};c.a.createRoot(document.getElementById("root")).render(o.a.createElement(N,null))}},[[12,1,2]]]);
//# sourceMappingURL=main.778e3cbf.chunk.js.map