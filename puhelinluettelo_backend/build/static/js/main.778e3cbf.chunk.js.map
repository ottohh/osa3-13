{"version":3,"sources":["services/services.js","App.js","index.js"],"names":["baseUrl","services","axios","get","newObject","post","id","put","concat","delete","Filter","props","react_default","a","createElement","value","filter","onChange","filterChanged","PersonForm","onSubmit","addPerson","NewName","handleNameChange","number","handleNumberChange","type","Notification","message","className","Persons","persons","console","log","map","person","name","toLowerCase","includes","key","onClick","personId","newPersons","Array","from","index","findIndex","Person","deletedPerson","splice","setPersons","then","req","setNotification","setNotificationType","setTimeout","catch","error","handleError","deletePerson","response","data","App","_useState","useState","_useState2","Object","slicedToArray","setFilter","_useState3","_useState4","_useState5","_useState6","setNewName","_useState7","_useState8","SetNewNumber","_useState9","_useState10","notification","_useState11","_useState12","notificationType","useEffect","App_Filter","event","target","App_PersonForm","preventDefault","newPerson","find","window","confirm","modifiedPerson","objectSpread","App_Notification","App_Persons","ReactDOM","createRoot","document","getElementById","render","src_App"],"mappings":"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","file":"static/js/main.778e3cbf.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl =\"/api/persons\"\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n  return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject)\r\n}\r\nconst deleteById = (id)=>{\r\n \r\n  return axios.delete(`${baseUrl}/${id}`)\r\n  \r\n}\r\n\r\nexport default { \r\n  getAll: getAll, \r\n  create: create, \r\n  update: update ,\r\n  deleteById:deleteById\r\n}","import { useState, useEffect } from 'react'\nimport React from 'react'\nimport services from './services/services'\nimport './index.css'\n\nconst Filter = (props)=>{\n  return (<div>\n    filter shown with <input value={props.filter}\n          onChange={props.filterChanged} />\n\n\n  </div>)\n\n}\n\n\nconst PersonForm = (props)=>{\n  return(\n    <form onSubmit={props.addPerson} >\n        <div>\n          name: <input  value={props.NewName}\n          onChange={props.handleNameChange} />\n\n          <div>number: <input value={props.number}\n          onChange={props.handleNumberChange} /></div>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  )\n\n}\n\nconst Notification = ( props ) => {\n  if (props.message === \"\") {\n    return null\n  }\n\n  return (\n    <div className={props.type===\"inform\"?\"inform\":\"error\"}>\n      {props.message}\n    </div>\n  )\n}\n\nconst Persons = (props)=>{\n\n  const persons=props.persons\n  const filter=props.filter\n\n  const deletePerson = personId =>{\n    const newPersons = Array.from(persons)\n    console.log(personId)\n    console.log(newPersons)\n    const index = newPersons.findIndex(Person=>Person.id==personId)\n    const deletedPerson =newPersons.splice(index,1)\n    console.log(deletedPerson)\n    console.log(newPersons)\n    props.setPersons(newPersons)\n    services.deleteById(personId).then(req=>{\n      props.setNotification(`deleted ${deletedPerson[0].name}`)\n      props.setNotificationType(\"inform\")\n      setTimeout(()=>props.setNotification(\"\"),5000)\n    }    \n\n    ).catch(error =>handleError(error,props.setNotification,props.setNotificationType))\n\n      \n\n  }\n\n\n  console.log(\"----------------\")\n  console.log(\"persons\",persons)\n  const filterPersons = (person)=>{\n\n    if(person.name.toLowerCase().includes(filter)){\n      return(\n        <li key={person.id}>{person.name} {person.number} <button onClick={()=>deletePerson(person.id)} >Delete</button></li>\n     )  \n    }\n  }\n  return(<ul>\n\n    {persons.map(filterPersons)}\n    \n    </ul>)\n}\n\n\nconst handleError = (error,setNotification,setNotificationType)=>{\n\n  setNotification(error.response.data.error)\n  setNotificationType(\"error\")\n  setTimeout(()=>setNotification(\"\"),5000)\n  console.log(error);\n}\n\n\n\n\nconst App = (props) => {\n\n  \n  const [filter,setFilter] = useState(\"\")\n  const [persons, setPersons] = useState([])\n  const [NewName, setNewName] = useState('')\n  const [number,SetNewNumber] = useState('')\n  const [notification,setNotification]=useState(\"\")\n  const [notificationType,setNotificationType]=useState(\"error\")\n\n  \n\n  \n  useEffect(()=>{services.getAll().\n    then((response)=>{setPersons(response.data)})\n  \n  },[])\n  \n\n  const handleNameChange = (event) => {\n    \n    setNewName(event.target.value)\n  }\n\n\n  const handleNumberChange = (event)=>{\n    SetNewNumber(event.target.value)\n\n  }\n\n\n  const filterChanged = (event)=>{\n    setFilter(event.target.value.toLowerCase())\n  }\n\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    let id=1 \n    const newPerson = {\n      \"name\": NewName,\n      \"number\": number,\n    }\n    if(persons.find(person=>person.name===NewName)){\n      let result = window.confirm(`${NewName} already exists. Do you want to change number?`)\n      if(result===true){\n        services.update(persons.find(person=>person.name===NewName).id,newPerson).then(\n          response=>{\n            console.log(response)\n            \n            const modifiedPerson = {...persons.find(person=>person.name===NewName),number:number}\n            console.log(\"modified:\",modifiedPerson)\n            setPersons(persons.map(person=>person.name===NewName?modifiedPerson:person))\n            setNotification(`Changed ${newPerson.name}`)\n            setNotificationType(\"inform\")\n            setTimeout(()=>setNotification(\"\"),5000)\n\n          }\n        ).catch(error =>handleError(error,setNotification,setNotificationType))\n        \n        \n      }\n      \n    }else{\n     \n      services.create(newPerson).then(function (response) {\n        console.log(response);\n        setNotification(`Added ${newPerson.name}`)\n        setNotificationType(\"inform\")\n        setTimeout(()=>setNotification(\"\"),5000)\n        setPersons(persons.concat(response.data))\n      })\n      .catch(error =>handleError(error,setNotification,setNotificationType))\n    }\n    console.log(persons)\n    \n    \n    SetNewNumber(\"\")\n    setNewName(\"\")\n  }\n\n  \n\n \n  \n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter filter={filter} filterChanged={filterChanged} />\n      \n      <h2>Add a new</h2>\n\n      <PersonForm addPerson={addPerson} number={number} NewName={NewName} handleNumberChange={handleNumberChange} handleNameChange={handleNameChange}\n      />\n      <Notification type={notificationType} message={notification} />\n      <h2>Numbers</h2>\n      <Persons setNotificationType={setNotificationType} setNotification={setNotification} persons={persons} filter={filter} setPersons={setPersons}/>\n     \n      <div>debug: {NewName}</div>\n   \n    </div>\n  )\n\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom/client'\n\nimport App from './App'\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />)"],"sourceRoot":""}